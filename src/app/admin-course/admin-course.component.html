<section class="home-section">
    <div class="homes-contents">
        <div class="above-table">
            <div>
                <h4>Course</h4>
            </div>
            <div class="d-flex">
                <div class="input-group rounded">
                    <input type="search" class="form-control rounded" placeholder="Search" aria-label="Search"
                        aria-describedby="search-addon" [(ngModel)]="searchText" (keyup.enter)="search()" />
                    <span class="input-group-text border-0" id="search-addon">
                        <i class="fas fa-search" (click)="search()"></i>
                    </span>
                </div>
                <button type="button" data-bs-toggle="modal" data-bs-target="#staticBackdrop1"
                    class="btn btn-sm btn-primary box-shaw"><i class="fa-solid fa-plus"></i>
                    Add</button>
            </div>
        </div>

        <!-- TABLE STARTED -->
        <div class="for-table-adj">
            <table class="table table-bordered table-hover border-secondary table-adj">
                <thead>
                    <tr style="background-color:#cbc6c6;">
                        <th scope="col" class="std-width-one">No.</th>
                        <th scope="col" class="std-width" style="cursor: pointer;">
                            Course Name &nbsp;
                        </th>
                        <th scope="col" class="std-width" style="cursor: pointer;">
                            Course Code &nbsp;
                        </th>
                        <th scope="col" class="std-width" style="cursor: pointer;">
                            No. of Module's &nbsp;
                        </th>
                        <th scope="col" class="std-width" style="cursor: pointer;">
                            No. of Quizes &nbsp;
                        </th>
                        <th scope="col" class="std-width" style="cursor: pointer;">
                            No. of Students &nbsp;
                        </th>
                        <th scope="col" class="std-width" style="cursor: pointer; text-align: center;">
                            Action
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="cursor: pointer;" *ngFor="let datass of filteredData; let i = index">
                        <th scope="row" style="width: 5%;">{{i+1}}</th>
                        <td style="width: 15%;">{{ datass.course_name }}</td>
                        <td>
                            {{ datass.course_code }}
                        </td>
                        <td>
                            {{ count_Data && count_Data.length > 0 && count_Data[0].module_count ? count_Data[0].module_count: '' }}
                        </td>
                        <td>
                            {{ count_Data && count_Data.length > 0 && count_Data[0].quiz_count ? count_Data[0].quiz_count: '' }}
                        </td>
                        <td>
                            256
                        </td>
                        <td>
                            <div class="action-icons" style="text-align: center;">
                                <i class="fa-solid fa-pen-to-square" data-bs-toggle="modal"
                                    data-bs-target="#staticBackdrop2" (click)="openModal(i)"></i> &nbsp;
                                &nbsp;&nbsp;&nbsp;
                                <i class="fa-solid fa-trash" data-bs-toggle="modal"
                                    data-bs-target="#staticBackdrop3"></i>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- MODALS -->

    <form (submit)="onSubmit_Course()" #f="ngForm" novalidate (ngSubmit)="f.form.valid">
        <div class="modal fade" id="staticBackdrop1" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-scrollable for-width-size">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="staticBackdropLabel">Add New Course</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="mb-3 d-flex" style="justify-content: space-between;">
                            <div><label for="formGroupExampleInput" class="form-label">Course Name</label>
                                <input type="text" class="form-control" name="courseName" id="formGroupExampleInput"
                                    placeholder="Enter a Course Name" [(ngModel)]="new_course_name"
                                    #newcourseName="ngModel" [ngModelOptions]="{standalone:true}" required />
                                <span class="text-danger" style="font-size: 12.5px;"
                                    *ngIf="this.submit&&newcourseName.errors?.['required']">
                                    *course name is required
                                </span>
                            </div> &nbsp;&nbsp;&nbsp;&nbsp;

                            <div><label for="formGroupExampleInput" class="form-label">Course Code</label>
                                <input type="text" class="form-control" name="courseCode" id="formGroupExampleInput"
                                    placeholder="Enter a Course Code" [(ngModel)]="new_course_code"
                                    #newcourseCode="ngModel" [ngModelOptions]="{standalone:true}" required />
                                <span class="text-danger" style="font-size: 12.5px;"
                                    *ngIf="this.submit&&newcourseCode.errors?.['required']">
                                    *course code is required
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Close</button>
                        <button type="submit" data-bs-target="#exampleModalToggle2" (click)="submit=true"
                            class="btn btn-sm btn-primary box-shaw">Create</button>
                    </div>
                </div>
            </div>
        </div>
    </form>

    <!-- modal's -->
    <!-- for update -->
    <div class="modal fade" id="staticBackdrop2" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Update course</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" (click)="pageReload()"></button>
                </div>
                <div class="modal-body">
                    <table class="table">
                        <tbody>
                            <tr class="displayClass">
                                <td>
                                    <span>Course name</span>
                                    <input type="text" class="form-control" *ngIf="selectedValue"
                                        [(ngModel)]="selectedValue.course_name"
                                        [ngModelOptions]="{standalone: true}">
                                </td>
                                <td class="mt-3">
                                    <span>Course Code</span>
                                    <input type="text" class="form-control" *ngIf="selectedValue"
                                        [(ngModel)]="selectedValue.course_code"
                                        [ngModelOptions]="{standalone: true}">
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal" (click)="pageReload()">Close</button>
                    <button type="button" class="btn btn-sm btn-primary box-shaw" (click)="onSaveChanges()">Update</button>
                </div>
            </div>
        </div>
    </div>

    <!-- for delete -->
    <div class="modal fade" id="staticBackdrop3" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Delete course</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    ...
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-sm btn-primary box-shaw">Delete</button>
                </div>
            </div>
        </div>
    </div>
</section>